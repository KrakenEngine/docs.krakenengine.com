<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Build system update, new source branches, Asynchronous API design">
<meta name="keywords" content="news,  ">
<title>Source Branches, Hydra Math Library, Asynchronous API | Kraken Engine SDK</title>
<link rel="stylesheet" href="css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<link rel="stylesheet" href="css/lavish-bootstrap.css">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="https://docs.krakenengine.comfeed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> Kraken Engine SDK</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                
                
                
                <li><a href="news.html">News</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Kraken Resources<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="https://krakenengine.com" target="_blank">Home Page</a></li>
                        
                        
                        
                        <li><a href="https://github.com/krakenengine" target="_blank">Github Repo</a></li>
                        
                        
                        
                        <li><a href="https://kearwood.com" target="_blank">Kearwood's Blog</a></li>
                        
                        
                    </ul>
                </li>
                
                
                
			<li><a class="email" title="Submit feedback" href="#" onclick="javascript:window.location='mailto:kearwood@kearwood.com?subject=Kraken Engine SDK f eedback&body=I have some feedback about the Source Branches, Hydra Math Library, Asynchronous API page: ' + window.location.href;"><i class="fa fa-envelope-o"></i> Feedback</a><li>

		
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Source Branches, Hydra Math Library, Asynchronous API">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
    <div class="col-lg-12">&nbsp;</div>
    <!-- Content Row -->
    <div class="row">
        <!-- Sidebar Column -->
        <div class="col-md-3">

          












<ul id="mysidebar" class="nav">
    <li class="sidebarTitle"> </li>
    
    
    
    <li>
        <a href="#">Overview</a>
        <ul>
            
            
            
            <li><a href="news.html">News</a></li>
            
            
            
            
            
            
            <li><a href="index.html">Getting Started</a></li>
            
            
            
            
            
            
            <li><a href="overview_components.html">Kraken Components</a></li>
            
            
            
            
            
            
            <li><a href="overview_concept.html">Conceptual Model</a></li>
            
            
            
            
            
            
            <li><a href="overview_rendering.html">Rendering Engine</a></li>
            
            
            
            
            
            
            <li><a href="overview_audio.html">Audio Engine</a></li>
            
            
            
            
            
            
            <li><a href="overview_embedding.html">Embedding</a></li>
            
            
            
            
            
            
            <li><a href="overview_extending.html">Extending</a></li>
            
            
            
            
            
            
            <li><a href="overview_lod.html">Hierarchical LOD</a></li>
            
            
            
            
            
            
            <li><a href="overview_scalability.html">Scalability</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Resources</a>
        <ul>
            
            
            
            <li><a href="sdk_resources_concept.html">Conceptual Model</a></li>
            
            
            
            
            
            
            <li><a href="sdk_resources_types.html">Resource Types</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Scenes</a>
        <ul>
            
            
            
            <li><a href="sdk_scene_format.html">Scene Syntax</a></li>
            
            
            
            
            
            
            <li><a href="sdk_scene_graph.html">Scene Graph</a></li>
            
            
            
            
            
            
            <li><a href="sdk_scene_node_base.html">Base Node</a></li>
            
            
            
            
            
            
            <li><a href="sdk_scene_node_camera.html">camera Node</a></li>
            
            
            
            
            
            
            <li><a href="sdk_scene_node_lod_set.html">lod_set Node</a></li>
            
            
            
            
            
            
            <li><a href="sdk_scene_node_lod_group.html">lod_group Node</a></li>
            
            
            
            
            
            
            <li><a href="sdk_scene_node_point_light.html">point_light Node</a></li>
            
            
            
            
            
            
            <li><a href="sdk_scene_node_directional_light.html">directional_light Node</a></li>
            
            
            
            
            
            
            <li><a href="sdk_scene_node_spot_light.html">spot_light Node</a></li>
            
            
            
            
            
            
            <li><a href="sdk_scene_node_particles_newtonian.html">particles_newtonian Node</a></li>
            
            
            
            
            
            
            <li><a href="sdk_scene_node_sprite.html">sprite Node</a></li>
            
            
            
            
            
            
            <li><a href="sdk_scene_node_model.html">model Node</a></li>
            
            
            
            
            
            
            <li><a href="sdk_scene_node_collider.html">collider Node</a></li>
            
            
            
            
            
            
            <li><a href="sdk_scene_node_bone.html">bone Node</a></li>
            
            
            
            
            
            
            <li><a href="sdk_scene_node_locator.html">locator Node</a></li>
            
            
            
            
            
            
            <li><a href="sdk_scene_node_audio_source.html">audio_source Node</a></li>
            
            
            
            
            
            
            <li><a href="sdk_scene_node_ambient_zone.html">ambient_zone Node</a></li>
            
            
            
            
            
            
            <li><a href="sdk_scene_node_reverb_zone.html">reverb_zone Node</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Animation</a>
        <ul>
            
            
            
            <li><a href="sdk_animation_concept.html">Conceptual Model</a></li>
            
            
            
            
            
            
            <li><a href="sdk_animation_rigging.html">Model Rigging</a></li>
            
            
            
            
            
            
            <li><a href="sdk_animation_blending.html">Animation Blending</a></li>
            
            
            
            
            
            
            <li><a href="sdk_animation_procedural.html">Procedural Animation</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Models</a>
        <ul>
            
            
            
            <li><a href="sdk_model_format.html">Model Format</a></li>
            
            
            
            
            
            
            <li><a href="sdk_model_procedural.html">Procedural Mesh Generation</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Materials</a>
        <ul>
            
            
            
            <li><a href="sdk_material_pbr.html">Physically Based Rendering</a></li>
            
            
            
            
            
            
            <li><a href="sdk_material_volumetric.html">Volumetric Lighting</a></li>
            
            
            
            
            
            
            <li><a href="sdk_material_format.html">Material Syntax</a></li>
            
            
            
            
            
            
            <li><a href="sdk_material_shaders.html">Custom Shaders</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">C++ API</a>
        <ul>
            
            
            
            <li><a href="sdk_api_library.html">Kraken Runtime Library</a></li>
            
            
            
            
            
            
            <li><a href="sdk_api_resources.html">Loading Resources</a></li>
            
            
            
            
            
            
            <li><a href="sdk_api_presenting.html">Presenting to Displays</a></li>
            
            
            
            
            
            
            <li><a href="sdk_api_vr.html">VR Presentation</a></li>
            
            
            
            
            
            
            <li><a href="sdk_api_behaviors.html">Implementing Behaviors</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Hydra Math Library</a>
        <ul>
            
            
            
            <li><a href="sdk_hydra_introduction">Hydra Introduction</a></li>
            
            
            
            
            
            
            <li><a href="sdk_hydra_scalar">kraken::scalar</a></li>
            
            
            
            
            
            
            <li><a href="sdk_hydra_vector2">kraken::vector2</a></li>
            
            
            
            
            
            
            <li><a href="sdk_hydra_vector2i">kraken::vector2i</a></li>
            
            
            
            
            
            
            <li><a href="sdk_hydra_vector3">kraken::vector3</a></li>
            
            
            
            
            
            
            <li><a href="sdk_hydra_vector4">kraken::vector4</a></li>
            
            
            
            
            
            
            <li><a href="sdk_hydra_triangle3">kraken::triangle3</a></li>
            
            
            
            
            
            
            <li><a href="sdk_hydra_quaternion">kraken::quaternion</a></li>
            
            
            
            
            
            
            <li><a href="sdk_hydra_matrix2">kraken::matrix2</a></li>
            
            
            
            
            
            
            <li><a href="sdk_hydra_matrix2x3">kraken::matrix2x3</a></li>
            
            
            
            
            
            
            <li><a href="sdk_hydra_matrix4">kraken::matrix4</a></li>
            
            
            
            
            
            
            <li><a href="sdk_hydra_aabb">kraken::aabb</a></li>
            
            
            
            
        </ul>
        
        
        
        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->
    </li>
</ul>
</div>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

    <!-- Content Column -->
    <div class="col-md-9">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">Source Branches, Hydra Math Library, Asynchronous API</h1>
        <p class="post-meta"><time datetime="2018-07-29T00:00:00+00:00" itemprop="datePublished">Jul 29, 2018</time> /
            
            
            
            <a href="tag_news.html">news</a>
            
            
            

        </p>


    </header>

    <div class="post-content" itemprop="articleBody">

        
        <div class="summary">Build system update, new source branches, Asynchronous API design</div>
        

        <h2 id="build-system-update">Build System Update</h2>

<p>The dust is starting to settle after setting up CMake to build the Kraken runtime library.  I’ve integrated continuous integration, using VisualStudio Online for Windows and Travis CI for other platforms.  Once the project is a bit further along, I will likely spin up bespoke CI and test infrastructure so that I can get controlled performance regression checking tests integrated.  It is essential to enable anyone to replicate the Kraken runtime builds on their own; however, I also indend to distribute pre-built binaries for anyone that prefers.</p>

<h2 id="hello-hydra">Hello, Hydra</h2>

<p>The Kraken math library has been broken out into a separate project, <a href="https://github.com/KrakenEngine/hydra">Hydra</a>.  The CMake scripts statically link this in Kraken runtime builds; however, it can now be used indepedently as well.  As part of this refactoring, I have changed all Hydra datatypes to POD data types.  This means we can’t have constructors and destructors, so I have implemented “Create” static methods for all of these types.  The advantage of POD is that they can easily be accessed from array structures mapped from storage, network, or to the GPU.  This will also enable more convenient use of SIMD operations affecting multiple instances of these objects.</p>

<h2 id="source-branches">Source Branches</h2>

<p>I have simplified the branches to track the main areas of work:</p>

<ul>
  <li><strong>feature-metal</strong> for implementation of a modernized Metal-based iOS and macOS back-end.</li>
  <li><strong>feature-vulkan</strong> for implementation of a modernized Vulkan-based Windows, Linux, and Android back-end.</li>
  <li><strong>feature-gltf</strong> for implementation of <a href="https://www.khronos.org/gltf/">Khronos GLTF</a> scene format support.</li>
</ul>

<p>The Metal and Vulkan back-ends will require new shaders and significant changes to the rendering pipeline.  As the existing code is updated, I will be replacing it with a purely PBR based lighting model.</p>

<h2 id="asynchronous-api-design">Asynchronous API Design</h2>

<p>I have been giving a lot of thought into API Design recently, as Kraken grows into a more disciplined, stable, and documented interface.  A design-goal of this interface is be to express the asynchronous nature of Kraken’s rendering and audio threads explicitly.  Scene graph changes will be asynchronous – the primary interaction with Kraken’s runtime will be the submission of an asynchronously executed, transactional command buffer.  The transactions themselves will be simple POD types composed of Hydra primitives.  They will be easily reused, composed on multiple threads, and require no heap memory allocations.</p>

<p>If the calling thread blocks or does not submit new commands for a frame, Kraken must have a defined behavior and continue operating in a reasonable manner.  This should reduce the reliance of VR runtime fallbacks, such as synthesis of frames through reprojection.</p>

    </div>



</article>



<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2019 Kearwood Software. All rights reserved. <br />
 Site last generated: Aug 6, 2019 <br />
<p><img src="images/company_logo.png" alt="Company logo"/></p>
                </div>
            </div>
</footer>


    </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>

</body>

</html>